<svg font-family="Aptos,Aptos_MSFontService,sans-serif" height="1050" viewBox="0 0 852 1050" width="852" xmlns="http://www.w3.org/2000/svg">
<style>
.caption { fill: white; }
</style>
<rect fill="white" height="100%" stroke="#000000" stroke-width="2" width="100%" x="0" y="0"/>
<g>
<g transform="translate(126, 0)">
<path d="M1641.94 1436.5 1641.94 1838.22 1635.06 1838.22 1635.06 1436.5ZM1652.25 1833.63 1638.5 1861.13 1624.75 1833.63Z" fill="#7F7F7F" transform="translate(-145,-135) scale(0.1)"/>
<text fill="#7F7F7F" font-size="10px" text-anchor="start" transform="translate(15,30) rotate(-90)">
Time
</text>
</g>
<g transform="translate(10, 10)">
<g transform="translate(0, 0)">
<rect fill="#b03e00" height="10" stroke="#5a1f00" stroke-width="2" width="10" x="0" y="0"/>
<text dominant-baseline="middle" font-size="10px" text-anchor="start" x="12" y="5">
Trident Invocation Verb
</text>
</g>
<g transform="translate(0, 20)">
<rect fill="#023c57" height="10" stroke="#042433" stroke-width="2" width="10" x="0" y="0"/>
<text dominant-baseline="middle" font-size="10px" text-anchor="start" x="12" y="5">
Operation
</text>
</g>
<g transform="translate(0, 40)">
<rect fill="#4EA72E" height="10" stroke="#1C440D" stroke-width="2" width="10" x="0" y="0"/>
<text dominant-baseline="middle" font-size="10px" text-anchor="start" x="12" y="5">
Subsystem
</text>
</g>
<g transform="translate(0, 60)">
<rect fill="#A02B93" height="10" stroke="#410C3B" stroke-width="2" width="10" x="0" y="0"/>
<text dominant-baseline="middle" font-size="10px" text-anchor="start" x="12" y="5">
Step
</text>
</g>
<g transform="translate(0, 80)">
<rect fill="#FF5757" height="10" stroke="#C00000" stroke-width="2" width="10" x="0" y="0"/>
<text dominant-baseline="middle" font-size="10px" text-anchor="start" x="12" y="5">
Script Hook
</text>
</g>
<g transform="translate(0, 100)">
<rect fill="#9c2403" height="10" stroke="#4d1101" stroke-width="2" width="10" x="0" y="0"/>
<text dominant-baseline="middle" font-size="10px" text-anchor="start" x="12" y="5">
System Action
</text>
</g>
<g transform="translate(0, 120)">
<rect fill="#01523c" height="10" stroke="#00241a" stroke-width="2" width="10" x="0" y="0"/>
<text dominant-baseline="middle" font-size="10px" text-anchor="start" x="12" y="5">
Storage Configuration
</text>
</g>
<g transform="translate(0, 140)">
<rect fill="#324a02" height="10" stroke="#1b2901" stroke-width="2" width="10" x="0" y="0"/>
<text dominant-baseline="middle" font-size="10px" text-anchor="start" x="12" y="5">
Mount
</text>
</g>
</g>
</g>
<g transform="translate(166, 10)">
<g transform="translate(0, 0)">
<rect fill="#b03e00" height="960" stroke="#5a1f00" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="480">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">install</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Static Validation</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="10">
Context-free validation of Host Config
</text>
</g>
<g transform="translate(0, 30)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Safety Check</tspan>
</text>
</g>
<g transform="translate(0, 60)">
<rect fill="#023c57" height="770" stroke="#042433" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="385">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Stage</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Load COSI</tspan>
</text>
</g>
<g transform="translate(0, 30)">
<rect fill="#FF5757" height="30" stroke="#C00000" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Pre-servicing Script</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">Hook</tspan>
</text>
</g>
<g transform="translate(0, 70)">
<rect fill="#A02B93" height="20" stroke="#410C3B" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Dynamic Validation</tspan>
</text>
</g>
<g transform="translate(0, 100)">
<rect fill="#A02B93" height="50" stroke="#410C3B" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="25">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Prepare</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#4EA72E" height="20" stroke="#1C440D" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">MOS Config</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="10">
Changes to current OS
</text>
</g>
<g transform="translate(0, 30)">
<rect fill="#4EA72E" height="20" stroke="#1C440D" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Hooks</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="10">
Stage addtl. files &amp; scripts
</text>
</g>
</g>
</g>
<g transform="translate(0, 160)">
<rect fill="#01523c" height="190" stroke="#00241a" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="90">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Block Device</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">Creation</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#008492" height="90" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="40">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Close pre-existing</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">devices</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Close verity</tspan>
</text>
</g>
<g transform="translate(0, 30)">
<rect fill="#008492" height="30" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Close Encrypted</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">Volumes</tspan>
</text>
</g>
<g transform="translate(0, 70)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Close RAID</tspan>
</text>
</g>
</g>
</g>
<g transform="translate(0, 100)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Create partitions</tspan>
</text>
</g>
<g transform="translate(0, 130)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Create RAID</tspan>
</text>
</g>
<g transform="translate(0, 160)">
<rect fill="#008492" height="30" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Create Encrypted</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">Volumes</tspan>
</text>
</g>
</g>
</g>
<g transform="translate(0, 360)">
<rect fill="#01523c" height="120" stroke="#00241a" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="55">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Block Device</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">Initialization</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Deploy Images</tspan>
</text>
</g>
<g transform="translate(0, 30)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Create Filesystems</tspan>
</text>
</g>
<g transform="translate(0, 60)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Create swap</tspan>
</text>
</g>
<g transform="translate(0, 90)">
<rect fill="#008492" height="30" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Open dm-verity</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">devices</tspan>
</text>
</g>
</g>
</g>
<g transform="translate(0, 490)">
<rect fill="#324a02" height="280" stroke="#1b2901" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="140">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">New OS Mount</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#A02B93" height="60" stroke="#410C3B" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="30">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Provision</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#4EA72E" height="20" stroke="#1C440D" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Boot</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="10">
ESP Deployment
</text>
</g>
<g transform="translate(0, 30)">
<rect fill="#4EA72E" height="30" stroke="#1C440D" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="15">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Hooks</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#FF5757" height="30" stroke="#C00000" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Post-provision</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">Script Hook</tspan>
</text>
</g>
</g>
</g>
</g>
</g>
<g transform="translate(0, 70)">
<rect fill="#A02B93" height="210" stroke="#410C3B" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="95">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Configure</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">(chroot)</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50"></tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#4EA72E" height="20" stroke="#1C440D" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Storage</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="10">
Regenerate fstab, crypttab, mdadm.conf
</text>
</g>
<g transform="translate(0, 30)">
<rect fill="#4EA72E" height="20" stroke="#1C440D" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Boot</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="10">
Update grub config when in use
</text>
</g>
<g transform="translate(0, 60)">
<rect fill="#4EA72E" height="20" stroke="#1C440D" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Network</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="10">
Write network config
</text>
</g>
<g transform="translate(0, 90)">
<rect fill="#4EA72E" height="20" stroke="#1C440D" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">OS Config</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="10">
Enact OS config changes
</text>
</g>
<g transform="translate(0, 120)">
<rect fill="#4EA72E" height="30" stroke="#1C440D" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="15">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Hooks</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#FF5757" height="30" stroke="#C00000" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Post-configure</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">Script Hook</tspan>
</text>
</g>
</g>
</g>
<g transform="translate(0, 160)">
<rect fill="#4EA72E" height="20" stroke="#1C440D" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Initrd</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="10">
Regenerate initrd when not UKI
</text>
</g>
<g transform="translate(0, 190)">
<rect fill="#4EA72E" height="20" stroke="#1C440D" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">SELinux</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="10">
Relabel filesystems when enabled
</text>
</g>
</g>
</g>
</g>
</g>
</g>
</g>
<g transform="translate(0, 840)">
<rect fill="#023c57" height="120" stroke="#042433" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="60">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Finalize</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#008492" height="90" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="40">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Boot Entry</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">Configuration</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#008492" height="30" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Insert/Update Boot</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">Entry</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="15">
Label depends on active volume
</text>
</g>
<g transform="translate(0, 40)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Set Boot Order</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="10">
New entry is first
</text>
</g>
<g transform="translate(0, 70)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Set NextBoot</tspan>
</text>
</g>
</g>
</g>
<g transform="translate(0, 100)">
<rect fill="#008492" height="20" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Trigger Reboot</tspan>
</text>
</g>
</g>
</g>
</g>
</g>
<g transform="translate(0, 970)">
<rect fill="#9c2403" height="20" stroke="#4d1101" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">&lt;System Reboot&gt;</tspan>
</text>
</g>
<g transform="translate(0, 1000)">
<rect fill="#b03e00" height="30" stroke="#5a1f00" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="15">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">commit</tspan>
</text>
<g transform="translate(110, 0)">
<g transform="translate(0, 0)">
<rect fill="#008492" height="30" stroke="#003F46" width="100" x="0" y="0"/>
<text class="caption" dominant-baseline="middle" fill="#FFFFFF" text-anchor="middle" x="50" y="10">

<tspan dominant-baseline="middle" font-size="10px" text-anchor="middle" x="50">Success/Rollback</tspan>
<tspan dominant-baseline="middle" dy="12px" font-size="10px" text-anchor="middle" x="50">Detection</tspan>
</text>
<text dominant-baseline="middle" font-size="7px" text-anchor="start" x="110" y="15">
Update is finalized on success
</text>
</g>
</g>
</g>
</g>
</svg>