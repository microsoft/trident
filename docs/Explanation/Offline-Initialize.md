
# Offline Initialize

To enable update, Trident requires some state related to how an existing operating system is laid out on disk.

For a bare metal installation, this state is generated by Trident during [Clean Install](../Reference/Glossary.md#clean-install) when a servicing ISO calls [trident install](../Reference/Trident-CLI.md#install) to deploy a COSI file.

In contrast, virtual machines are typically created from a virtual disk containing the operating system, `trident install` is never invoked. `Offline Initialize` has been created to generate the state that Trident requires to service the virtual machine.

To utilize `Offline Initialize`, add the trident package and invoke [trident offline-initialize](../Reference/Trident-CLI.md#offline-initialize) as part of your Image Customizer configuration:

``` yaml
os:
  packages:
    install:
      - trident

scripts:
  postCustomization:
    - content: |
        trident offline-initialize
```

When `Offline Initialize` is executed, it will read the Image Customizer history file, understand the disk layout, and generate the necessary state for Trident to service the eventual virtual machine.
