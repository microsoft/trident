# THIS FILE IS AUTOMATICALLY GENERATED BY `docbuilder/src/host_config/samples.rs::print_sample("simple")`.
# DO NOT EDIT MANUALLY!
# 
# Simple sample showcasing OS config of networking, users, additional files and customer scripts.

storage:
  disks:
  - id: os
    device: /dev/disk/by-path/pci-0000:00:1f.2-ata-2.0
    partitionTableType: gpt
    partitions:
    - id: esp
      type: esp
      size: 64M
    - id: root
      type: root
      size: 8G
  filesystems:
  - deviceId: esp
    type: vfat
    source:
      type: esp-image
      url: file:///trident_cdrom/data/esp.rawzst
      sha256: e15853875ce26f8fb8090177821240a889e21ac0c5acee75c5a060401bbdf0ae
      format: raw-zst
    mountPoint:
      path: /boot/efi
      options: umask=0077
  - deviceId: root
    type: ext4
    source:
      type: image
      url: file:///trident_cdrom/data/root.rawzst
      sha256: c2ce64662fbe2fa0b30a878c11aac71cb9f1ef27f59a157362ccc0881df47293
      format: raw-zst
    mountPoint:
      path: /
      options: defaults
scripts:
  preServicing:
  - name: sample-pre-servicing-script
    runOn:
    - all
    content: echo 'Running before Trident servicing'
  postProvision:
  - name: sample-provision-script
    runOn:
    - clean-install
    - ab-update
    content: ls
    arguments:
    - $TARGET_ROOT
    - -l
  postConfigure:
  - name: sample-configure-script
    runOn:
    - all
    content: /var/config-script.sh
    environmentVariables:
      SAMPLE_VARIABLE: sample-variable-value
os:
  network:
    version: 2
    ethernets:
      eths:
        match:
          name: enp*
        dhcp4: true
  selinux:
    mode: null
  users:
  - name: my-custom-user
    sshPublicKeys:
    - <MY_PUBLIC_SSH_KEY>
    sshMode: key-only
  additionalFiles:
  - destination: /var/config-script.sh
    content: 'echo ''Running from newly deployed chroot: $SAMPLE_VARIABLE'''
    permissions: '0755'
