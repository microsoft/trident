# THIS FILE IS AUTOMATICALLY GENERATED BY `docbuilder/src/host_config/samples.rs::print_sample("raid-mirrored")`.
# DO NOT EDIT MANUALLY!
# 
# Example of RAID mirroring demonstrating the use of RAID1 on ESP, root, and Trident.

storage:
  disks:
  - id: disk1
    device: /dev/disk/by-path/pci-0000:00:1f.2-ata-2
    partitionTableType: gpt
    partitions:
    - id: esp1
      type: esp
      size: 64M
    - id: root1
      type: root
      size: 4G
    - id: trident1
      type: linux-generic
      size: 128M
  - id: disk2
    device: /dev/disk/by-path/pci-0000:00:1f.2-ata-3
    partitionTableType: gpt
    partitions:
    - id: esp2
      type: esp
      size: 64M
    - id: root2
      type: root
      size: 4G
    - id: trident2
      type: linux-generic
      size: 128M
  raid:
    software:
    - id: esp
      name: esp
      level: raid1
      devices:
      - esp1
      - esp2
    - id: root
      name: root
      level: raid1
      devices:
      - root1
      - root2
    - id: trident
      name: trident
      level: raid1
      devices:
      - trident1
      - trident2
    syncTimeout: 180
  filesystems:
  - deviceId: esp
    mountPoint:
      path: /boot/efi
      options: umask=0077
  - deviceId: root
    mountPoint:
      path: /
      options: defaults
  - deviceId: trident
    source: new
    type: ext4
    mountPoint:
      path: /var/lib/trident
      options: defaults
scripts:
  postConfigure:
  - name: wheel
    runOn:
    - clean-install
    - ab-update
    content: 'echo "%wheel ALL=(ALL:ALL) NOPASSWD: ALL" > /etc/sudoers.d/wheel'
os:
  netplan:
    version: 2
    ethernets:
      eths:
        match:
          name: enp*
        dhcp4: true
  selinux:
    mode: permissive
  users:
  - name: my-custom-user
    sshPublicKeys:
    - <MY_PUBLIC_SSH_KEY>
    sshMode: key-only
image:
  url: file:///path/to/image.cosi
  sha384: ec9a9aa23f02b30f4ec6a168b9bc24733b652eeab4f8abc243630666a5e34cea1667c34313a13ec1564ac4871b80112f
