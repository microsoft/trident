parameters:
  - name: osmodifierBuildType
    displayName: OSModifier build type
    type: string
    values:
      - main
      - preview

  - name: osModifierVersion
    displayName: OSModifier version
    type: string
    default: "*"

steps:
  - ${{ if eq(parameters.osmodifierBuildType, 'main') }}:
    - task: UniversalPackages@0
      displayName: "Download OSModifier (main)"
      inputs:
        command: download
        vstsFeed: polar/PolarCoreArtifacts
        vstsFeedPackage: osmodifier
        vstsPackageVersion: ${{ parameters.osModifierVersion }}
        includePrerelease: true
        downloadDirectory: "$(Build.SourcesDirectory)/artifacts"

  - ${{ if eq(parameters.osmodifierBuildType, 'preview') }}:
    - task: UniversalPackages@0
      displayName: "Download OSModifier (preview)"
      inputs:
        command: download
        vstsFeed: polar/PolarCoreArtifacts
        vstsFeedPackage: osmodifier_preview
        vstsPackageVersion: ${{ parameters.osModifierVersion }}
        includePrerelease: true
        downloadDirectory: "$(Build.SourcesDirectory)/artifacts"
